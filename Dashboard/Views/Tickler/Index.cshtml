@{
    ViewBag.Title = "Tickler Overview";
    ViewBag.Breadcrumb = "<a href=\"/\">Dashboard Home</a>";
	ViewBag.ActiveNav = "ticklerNavHome";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@Html.Partial("_TopNav", (Object) ViewBag.ActiveNav)

<div class="container-fluid">
    <div class="row-fluid">
        <div class="span12">
            <div class="span4">&nbsp;</div>
            <div class="span4 well" style="text-align: center">
                <h3>Please select a year</h3>
                @Html.DropDownList("DesiredYear", (IEnumerable<SelectListItem>) @ViewBag.Years)
            </div>
            <div class="span4">&nbsp;</div>
        </div>
    </div>
    <div class="row-fluid">
        <div class="span4 well">
            <div id="chart1"></div>
        </div>

        <div class="span4 well">
            <div id="chart2"></div>
        </div>

        <div class="span4 well">
            <div id="chart3"></div>
        </div>
    </div>

    <div class="row-fluid">
        <div class="span4 well">
            <div id="chart4"></div>
        </div>

        <div class="span4 well">
            <div id="chart5"></div>
        </div>

        <div class="span4 well">
            <div id="chart6"></div>
        </div>
    </div>

    <div class="row-fluid">
        <div class="span4 well">
            <div id="chart7"></div>
        </div>

        <div class="span4 well">
            <div id="chart8"></div>
        </div>

        <div class="span4 well">
            <div id="chart9"></div>
        </div>
    </div>
</div>

<script type="text/javascript">
    $(function () {
        $('#DesiredYear').select(new Date().getFullYear());
        var year = $('#DesiredYear').val();

        // Initialize the graphs with the current year
        updateGraphs(year);

        $('#DesiredYear').change(function () {
            $('#DesiredYear').select(new Date().getFullYear());
            var year = $('#DesiredYear').val();
            updateGraphs(year);
        });

        function updateGraphs(year) {
            LibraryCharts.tickler1('chart1', '@Url.Content("~/Tickler/CatalogingTitlesByUserForYear/")', year);
            LibraryCharts.tickler2('chart2', '@Url.Content("~/Tickler/CatalogingVolumesByUserForYear/")', year);
        }
    });
</script>